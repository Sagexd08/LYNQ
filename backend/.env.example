# ============================================
# LYNQ Backend Environment Variables
# ============================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# ============================================
# Application Configuration
# ============================================
NODE_ENV=development
PORT=3000

# CORS Configuration
# For production: use your frontend domain(s), comma-separated
# For development: use * to allow all origins
CORS_ORIGIN=http://localhost:5173,http://localhost:3000

# ============================================
# Database Configuration
# ============================================
# PostgreSQL connection string (required)
# Format: postgresql://user:password@host:port/database?schema=public
DATABASE_URL=postgresql://lynq:lynq_password@localhost:5432/lynq?schema=public

# Supabase Configuration (optional - if using Supabase)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# ============================================
# Authentication & Security
# ============================================
# JWT Secret - MUST be at least 32 characters long
# Generate a secure secret: openssl rand -base64 64
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long-change-this-in-production
JWT_EXPIRATION=24h

# ============================================
# ML Service Configuration
# ============================================
# ML Service URL (required)
# Local development: http://localhost:8000
# Production: https://your-ml-service.railway.app or AWS API Gateway URL
ML_SERVICE_URL=http://localhost:8000

# ML Service API Key (required, minimum 8 characters)
# This must match the API_KEY in your ML service
ML_API_KEY=your-ml-service-api-key-min-8-chars

# ============================================
# Blockchain Configuration
# ============================================
# Mantle Sepolia Testnet (PRIMARY - Recommended for deployment)
MANTLE_SEPOLIA_RPC_URL=https://rpc.sepolia.mantle.xyz
# Alternative Mantle RPC providers:
# MANTLE_SEPOLIA_RPC_URL=https://mantle-sepolia.drpc.org
# MANTLE_SEPOLIA_RPC_URL=https://sepolia.mantle.xyz

# Ethereum Sepolia Testnet (optional)
SEPOLIA_RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_KEY
# Alternative: https://eth-sepolia.g.alchemy.com/v2/YOUR_ALCHEMY_KEY

# Polygon Amoy Testnet (optional)
BLOCKCHAIN_RPC_URL_POLYGON=https://polygon-amoy.infura.io/v3/YOUR_INFURA_KEY
# Alternative: https://polygon-amoy.g.alchemy.com/v2/YOUR_ALCHEMY_KEY

# Default Blockchain RPC URL (fallback if Mantle not specified)
# Used by blockchain service if MANTLE_SEPOLIA_RPC_URL is not set
BLOCKCHAIN_RPC_URL=https://rpc.sepolia.mantle.xyz

# Private Key for blockchain transactions (required for on-chain operations)
# Format: 0x... (64 hex characters)
# WARNING: Never commit this to version control!
# Use a dedicated wallet with minimal funds for testing
PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# Deployed Contract Addresses (required after deploying contracts)
# Deploy contracts using: cd backend/contracts && npx hardhat run scripts/deploy.ts --network mantleSepolia
LOAN_CORE_ADDRESS=0x0000000000000000000000000000000000000000
COLLATERAL_VAULT_ADDRESS=0x0000000000000000000000000000000000000000

# Blockchain Explorer API Keys (optional - for contract verification)
MANTLE_EXPLORER_API_KEY=your-mantle-explorer-api-key
SEPOLIA_EXPLORER_API_KEY=your-etherscan-api-key
AMOY_EXPLORER_API_KEY=your-polygonscan-api-key

# ============================================
# Redis Configuration
# ============================================
# Redis connection URL (required for queues and caching)
# Local development: redis://localhost:6379
# Railway: redis://default:password@host:port
REDIS_URL=redis://localhost:6379

# ============================================
# Telegram Bot Configuration (optional)
# ============================================
# Get bot token from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=your-telegram-bot-token-from-botfather

# Admin chat ID for notifications (optional)
# Get your chat ID by messaging @userinfobot on Telegram
TELEGRAM_ADMIN_CHAT_ID=your-telegram-chat-id

# Webhook secret for Telegram webhook verification (optional)
TELEGRAM_WEBHOOK_SECRET=your-webhook-secret-key

# ============================================
# Deployment Notes
# ============================================
# 1. For Railway deployment, set these in Railway dashboard:
#    - Root Directory: backend
#    - All environment variables above
#
# 2. For Mantle Sepolia deployment:
#    - Get testnet MNT from: https://faucet.sepolia.mantle.xyz/
#    - Deploy contracts: cd backend/contracts && npx hardhat run scripts/deploy.ts --network mantleSepolia
#    - Update LOAN_CORE_ADDRESS and COLLATERAL_VAULT_ADDRESS with deployed addresses
#
# 3. Generate secure secrets:
#    - JWT_SECRET: openssl rand -base64 64
#    - ML_API_KEY: openssl rand -hex 32
#    - TELEGRAM_WEBHOOK_SECRET: openssl rand -hex 32
